@prefix : <https://kkalass.github.io/locorda/example/personal_notes_app/mappings/note-v1#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix mc: <https://w3id.org/solid-crdt-sync/vocab/merge-contract#> .
@prefix algo: <https://w3id.org/solid-crdt-sync/vocab/crdt-algorithms#> .
@prefix mappings: <https://w3id.org/solid-crdt-sync/mappings/> .
@prefix schema: <https://schema.org/> .
@prefix pnotes: <https://kkalass.github.io/locorda/example/personal_notes_app/vocabulary/personal-notes#> .

# CRDT Document Mapping for Personal Notes
# Defines merge strategies for PersonalNote properties
# TODO: generate from Dart code annotations

<> a mc:DocumentMapping ;
    rdfs:label "Personal Note CRDT Document Mapping v1" ;
    rdfs:comment "Defines how personal notes should merge when conflicts occur during sync." ;
    mc:imports ( mappings:core-v1 ) ;
    mc:classMapping ( [
        a mc:ClassMapping ;
        mc:appliesToClass pnotes:PersonalNote ;
        mc:rule
            [ mc:predicate schema:name ; algo:mergeWith algo:LWW_Register ],
            [ mc:predicate schema:text ; algo:mergeWith algo:LWW_Register ],
            [ mc:predicate schema:keywords ; algo:mergeWith algo:OR_Set ],
            [ mc:predicate pnotes:belongsToCategory ; algo:mergeWith algo:LWW_Register ],
            [ mc:predicate schema:dateCreated ; algo:mergeWith algo:LWW_Register ],
            [ mc:predicate schema:dateModified ; algo:mergeWith algo:LWW_Register ]
    ] ) .