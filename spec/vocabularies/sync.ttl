@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix sync: <https://w3id.org/solid-crdt-sync/vocab/sync#> .

# --- Ontology Definition ---

<https://w3id.org/solid-crdt-sync/vocab/sync> a owl:Ontology;
    rdfs:label "CRDT Synchronization Framework";
    rdfs:comment "Core synchronization vocabulary for the CRDT sync framework infrastructure." .

# --- Class Definitions ---

sync:ManagedDocument a rdfs:Class;
    rdfs:label "Managed Document";
    rdfs:comment "A document that is managed by the locorda sync framework, containing framework metadata and a primary resource topic.";
    rdfs:subClassOf <http://xmlns.com/foaf/0.1/Document> .

sync:ResourceStatement a rdfs:Class;
    rdfs:label "Resource Statement";
    rdfs:comment "A statement containing framework metadata about a specific resource within a managed document. Used for resource-level concerns like deletion tombstones while maintaining clean separation from application data." .

sync:BlankNodeMapping a rdfs:Class;
    rdfs:label "Blank Node Mapping";
    rdfs:comment "Represents a mapping between a canonical fragment identifier and a blank node in the document. Used for stable references to identified blank nodes across serialization boundaries." .

sync:IdentificationGraph a rdfs:Class;
    rdfs:label "Identification Graph";
    rdfs:comment "Internal temporary graph structure used during canonical fragment generation for identified blank nodes. Contains only identifying properties and parent relationships. Never persisted in documents." .

# --- Property Definitions ---

sync:isGovernedBy a rdf:Property;
    rdfs:label "is governed by";
    rdfs:comment "Links a data or index resource to an ordered list (rdf:List) of public mapping files that define its merge behavior. Documents are merged in list order with 'first wins' semantics - implementations should append only, not prepend, to avoid overriding existing definitions.";
    rdfs:domain rdfs:Resource;
    rdfs:range rdf:List . # Ordered list of mapping file IRIs

sync:managedResourceType a rdf:Property;
    rdfs:label "managed resource type";
    rdfs:comment "Identifies the semantic RDF class of the resources being managed (e.g., schema:Recipe). Used in two contexts: (1) Within solid:TypeRegistration entries where solid:forClass is sync:ManagedDocument, enabling framework-aware applications to discover containers holding specific semantic types. (2) Directly on sync:ManagedDocument instances to enable efficient garbage collection and retention policies without requiring document content fetching.";
    rdfs:domain [ a owl:Class; owl:unionOf ( <http://www.w3.org/ns/solid/terms#TypeRegistration> sync:ManagedDocument ) ];
    rdfs:range rdfs:Class .

sync:hasStatement a rdf:Property;
    rdfs:label "has statement";
    rdfs:comment "Links a managed document to RDF reification statements that contain framework metadata such as property tombstones. This ensures all framework metadata remains connected to the document for proper framework/app data separation during graph traversal.";
    rdfs:domain sync:ManagedDocument;
    rdfs:range rdf:Statement .

sync:resource a rdf:Property;
    rdfs:label "resource";
    rdfs:comment "Points to the resource that this framework statement is about. Used in resource statements to identify which resource the metadata applies to.";
    rdfs:domain sync:ResourceStatement;
    rdfs:range rdfs:Resource .

sync:hasBlankNodeMapping a rdf:Property;
    rdfs:label "has blank node mapping";
    rdfs:comment "Links the managed document to framework-reserved fragment identifiers for identified blank nodes.";
    rdfs:domain sync:ManagedDocument;
    rdfs:range sync:BlankNodeMapping .

sync:blankNode a rdf:Property;
    rdfs:label "blank node";
    rdfs:comment "Links a framework-reserved fragment identifier to the actual blank node in the document.";
    rdfs:domain sync:BlankNodeMapping .

sync:parent a rdf:Property;
    rdfs:label "parent";
    rdfs:comment "Links an identified blank node to its parent resource within an identification graph during canonical fragment computation.";
    rdfs:domain sync:IdentificationGraph .
