{
  "version": "1.0",
  "base": {
    "timestamp": "2024-01-01T00:00:00Z",
    "installation_id": "test-installation"
  },
  "urlToPathMap": {
    "https://example.org/test/mappings/recipe-v1": "shared/mappings/recipe-v1.ttl",
    "https://example.org/test/mappings/recipe-v1-unidentified": "shared/mappings/recipe-v1-unidentified.ttl",
    "https://example.org/test/mappings/recipe-v1-all-unidentified": "shared/mappings/recipe-v1-all-unidentified.ttl",
    "https://w3id.org/solid-crdt-sync/mappings/core-v1": "../../../../../spec/mappings/core-v1.ttl",
    "https://w3id.org/solid-crdt-sync/mappings/client-installation-v1": "../../../../../spec/mappings/client-installation-v1.ttl"
  },
  "test_suites": [
    {
      "suite": "save",
      "description": "Tests for SyncGraphManager.save() operation",
      "tests": [
        {
          "id": "save_01",
          "title": "First save of new resource",
          "description": "Saving a new resource when no data exists in storage should add all triples with CRDT metadata",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "input_resource": "test_cases/save/01_first_save/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/01_first_save/expected_stored_graph.ttl",
            "installation": "test_cases/save/01_first_save/expected_installation.ttl"
          },
          "action_ts": {
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_02",
          "title": "Update existing resource - LWW property change",
          "description": "Updating a LWW-Register property (name) should increment clock and replace old value",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/02_update_lww/stored_graph_before.ttl",
          "input_resource": "test_cases/save/02_update_lww/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/02_update_lww/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/name",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_03",
          "title": "Update existing resource - OR-Set add elements",
          "description": "Adding elements to an OR-Set property (recipeIngredient) should preserve existing elements and add new ones",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/03_orset_add/stored_graph_before.ttl",
          "input_resource": "test_cases/save/03_orset_add/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/03_orset_add/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/recipeIngredient",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_04",
          "title": "Update existing resource - OR-Set remove element",
          "description": "Removing an element from an OR-Set property should generate tombstone metadata and remove the element",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/04_orset_remove/stored_graph_before.ttl",
          "input_resource": "test_cases/save/04_orset_remove/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/04_orset_remove/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/recipeIngredient",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_05",
          "title": "Update multiple properties simultaneously",
          "description": "Updating both LWW (name) and OR-Set (recipeIngredient) properties in single save should increment clock once and handle both CRDT types",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/05_multiple_properties/stored_graph_before.ttl",
          "input_resource": "test_cases/save/05_multiple_properties/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/05_multiple_properties/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/name",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/recipeIngredient",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_06",
          "title": "No-op save (identical data)",
          "description": "Saving identical data should detect no changes, skip save, and leave document unchanged",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/06_noop/stored_graph_before.ttl",
          "input_resource": "test_cases/save/06_noop/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/06_noop/expected_stored_graph.ttl",
            "property_changes": []
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_07",
          "title": "Nested resources with fragment identifiers",
          "description": "Saving a resource with nested fragment-identified resources should handle both resources and their properties correctly",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "input_resource": "test_cases/save/07_nested_fragments/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/07_nested_fragments/expected_stored_graph.ttl"
          },
          "action_ts": {
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_08",
          "title": "Update nested resource properties",
          "description": "Updating properties of a nested fragment-identified resource should track changes for the nested resource",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/08_update_nested/stored_graph_before.ttl",
          "input_resource": "test_cases/save/08_update_nested/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/08_update_nested/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#nutrition",
                "property_iri": "https://schema.org/calories",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#nutrition",
                "property_iri": "https://schema.org/fatContent",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_09",
          "title": "Remove nested resource entirely",
          "description": "Removing a nested fragment-identified resource should generate resource deletion tombstone",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/09_remove_nested/stored_graph_before.ttl",
          "input_resource": "test_cases/save/09_remove_nested/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/09_remove_nested/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/nutrition",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_10",
          "title": "Add new nested resource",
          "description": "Adding a new nested fragment-identified resource should track changes for both the parent and nested resource",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/10_add_nested/stored_graph_before.ttl",
          "input_resource": "test_cases/save/10_add_nested/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/10_add_nested/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/nutrition",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#nutrition",
                "property_iri": "http://www.w3.org/1999/02/22-rdf-syntax-ns#type",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#nutrition",
                "property_iri": "https://schema.org/calories",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#nutrition",
                "property_iri": "https://schema.org/fatContent",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_11",
          "title": "Foreign clock entries preserved on update",
          "description": "When updating a document with clock entries from other installations, those foreign clock entries should be preserved",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/11_foreign_clock_preserved/stored_graph_before.ttl",
          "input_resource": "test_cases/save/11_foreign_clock_preserved/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/11_foreign_clock_preserved/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/name",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_12",
          "title": "First save with identified blank nodes",
          "description": "Saving a resource with identified blank nodes should generate canonical fragment IRIs and create sync:hasBlankNodeMapping entries",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "input_resource": "test_cases/save/12_blank_node_first_save/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/12_blank_node_first_save/expected_stored_graph.ttl"
          },
          "action_ts": {
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_13",
          "title": "Update preserves identified blank node mappings",
          "description": "Updating a resource with existing identified blank node mappings should preserve those mappings and not create duplicates",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/13_blank_node_preserved/stored_graph_before.ttl",
          "input_resource": "test_cases/save/13_blank_node_preserved/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/13_blank_node_preserved/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/name",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_14",
          "title": "Update identified blank node properties",
          "description": "Changing properties of an identified blank node should track the change and preserve the canonical mapping",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/14_update_blank_node_property/stored_graph_before.ttl",
          "input_resource": "test_cases/save/14_update_blank_node_property/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/14_update_blank_node_property/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#lcrd-ibn-md5-74f4d0cc07fa8ce00b8856defa9a0e31",
                "property_iri": "https://schema.org/amount",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_15",
          "title": "Add new identified blank node to existing set",
          "description": "Adding a new identified blank node to an OR-Set should create a new mapping and track the property change",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/15_add_blank_node/stored_graph_before.ttl",
          "input_resource": "test_cases/save/15_add_blank_node/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/15_add_blank_node/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/recipeIngredient",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#lcrd-ibn-md5-9110880a000d224b944a75c68db15db9",
                "property_iri": "https://schema.org/amount",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#lcrd-ibn-md5-9110880a000d224b944a75c68db15db9",
                "property_iri": "https://schema.org/unit",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#lcrd-ibn-md5-9110880a000d224b944a75c68db15db9",
                "property_iri": "http://www.w3.org/1999/02/22-rdf-syntax-ns#type",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#lcrd-ibn-md5-9110880a000d224b944a75c68db15db9",
                "property_iri": "https://schema.org/name",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_16",
          "title": "Remove identified blank node from set",
          "description": "Removing an identified blank node from an OR-Set should generate a tombstone using the canonical IRI and preserve the mapping",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/16_remove_blank_node/stored_graph_before.ttl",
          "input_resource": "test_cases/save/16_remove_blank_node/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/16_remove_blank_node/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/recipeIngredient",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_17",
          "title": "Update with existing property tombstones preserved",
          "description": "Updating a resource that has existing property tombstones should preserve those tombstones while making new changes",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/17_update_with_property_tombstones/stored_graph_before.ttl",
          "input_resource": "test_cases/save/17_update_with_property_tombstones/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/17_update_with_property_tombstones/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/name",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 3
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/recipeIngredient",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 3
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/prepTime",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 3
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_18",
          "title": "Delete properties with existing tombstones preserved",
          "description": "Deleting properties should create new tombstones while preserving existing ones",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/18_delete_with_existing_tombstones/stored_graph_before.ttl",
          "input_resource": "test_cases/save/18_delete_with_existing_tombstones/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/18_delete_with_existing_tombstones/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/recipeIngredient",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 3
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/cookTime",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 3
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_19",
          "title": "Update with existing resource-level tombstone preserved",
          "description": "Updating a resource that has resource-level tombstones (from deleted nested resources) should preserve those tombstones",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/19_update_with_resource_tombstone/stored_graph_before.ttl",
          "input_resource": "test_cases/save/19_update_with_resource_tombstone/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/19_update_with_resource_tombstone/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/name",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 4
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/recipeIngredient",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 4
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/cookTime",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 4
              },
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/prepTime",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 4
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_20",
          "title": "First save with non-identified blank node",
          "description": "Saving a resource with a non-identified blank node (missing identifying properties) should keep it as a blank node without creating a canonical IRI mapping",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "input_resource": "test_cases/save/20_non_identified_blank_node_first_save/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/20_non_identified_blank_node_first_save/expected_stored_graph.ttl"
          },
          "action_ts": {
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_21",
          "title": "Update non-identified blank node with LWW-Register",
          "description": "Updating a non-identified blank node value in LWW-Register should replace the old blank node with a new one (LWW semantics, no tombstone)",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/21_non_identified_blank_node_update/stored_graph_before.ttl",
          "input_resource": "test_cases/save/21_non_identified_blank_node_update/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/21_non_identified_blank_node_update/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/nutrition",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_22",
          "title": "Shared blank node referenced from multiple paths",
          "description": "When a blank node (supplier) is referenced from two different resources (tomato and basil) and one reference is removed (basil's provider property), the shared blank node should remain since it's still referenced by the other resource (tomato). Note that the property value tombstones need to be added for each known ID of the blank node, so we actually expect two property value tombstones and not one.",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/22_multiple_refs_identified_remove_one/stored_graph_before.ttl",
          "input_resource": "test_cases/save/22_multiple_refs_identified_remove_one/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/22_multiple_refs_identified_remove_one/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#lcrd-ibn-md5-9110880a000d224b944a75c68db15db9",
                "property_iri": "https://schema.org/provider",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_23",
          "title": "Shared unidentified blank node referenced from multiple identified resources",
          "description": "When an unidentified blank node (supplier with no identifying properties) is referenced from two identified resources (tomato and basil ingredients, identified by name) and one reference is removed (basil's provider property), the removal is handled via LWW-Register semantics. The shared unidentified supplier blank node remains since it's still referenced by tomato. No tombstone is created because LWW-Register replaces the value with absence.",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/23_multiple_refs_unidentified_remove_one/stored_graph_before.ttl",
          "input_resource": "test_cases/save/23_multiple_refs_unidentified_remove_one/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/23_multiple_refs_unidentified_remove_one/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#lcrd-ibn-md5-9110880a000d224b944a75c68db15db9",
                "property_iri": "https://schema.org/provider",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_24",
          "title": "Chain of unidentified blank nodes, leaf deleted",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/24_multiple_refs_all_unidentified_remove_one/stored_graph_before.ttl",
          "input_resource": "test_cases/save/24_multiple_refs_all_unidentified_remove_one/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/24_multiple_refs_all_unidentified_remove_one/expected_stored_graph.ttl",
            "property_changes": [
              {
                "resource_iri": "tag:locorda.org,2025:l:aHR0cHM6Ly9zY2hlbWEub3JnL1JlY2lwZQ==:cmVjaXBlMTIz#it",
                "property_iri": "https://schema.org/recipeIngredient",
                "changed_at": "2024-01-01T02:00:00Z",
                "logical_clock": 2
              }
            ]
          },
          "action_ts": {
            "prepare": {
              "save": "2024-01-01T00:00:00Z"
            },
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_25",
          "title": "No-op save with identified blank nodes and tombstones",
          "description": "Re-saving identical data with deep structure of identified blank nodes (ingredients and supplier) including existing tombstones. Should be a complete no-op with no property changes or clock increments.",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/25_no_op_identified_blank_nodes/stored_graph_before.ttl",
          "input_resource": "test_cases/save/25_no_op_identified_blank_nodes/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/25_no_op_identified_blank_nodes/expected_stored_graph.ttl",
            "property_changes": []
          },
          "action_ts": {
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_26",
          "title": "No-op save with mixed identified and unidentified blank nodes",
          "description": "Re-saving identical data with identified ingredients and unidentified supplier. Should be a complete no-op with no property changes or clock increments.",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/26_no_op_mixed_identified_unidentified/stored_graph_before.ttl",
          "input_resource": "test_cases/save/26_no_op_mixed_identified_unidentified/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/26_no_op_mixed_identified_unidentified/expected_stored_graph.ttl",
            "property_changes": []
          },
          "action_ts": {
            "save": "2024-01-01T02:00:00Z"
          }
        },
        {
          "id": "save_27",
          "title": "No-op save with all unidentified blank nodes",
          "description": "Re-saving identical data with all unidentified blank nodes (ingredients and supplier). Should be a complete no-op with no property changes or clock increments.",
          "config": "shared/configs/basic_config.json",
          "typeIri": "https://schema.org/Recipe",
          "stored_graph_before": "test_cases/save/27_no_op_all_unidentified/stored_graph_before.ttl",
          "input_resource": "test_cases/save/27_no_op_all_unidentified/input_resource.ttl",
          "expected": {
            "stored_graph": "test_cases/save/27_no_op_all_unidentified/expected_stored_graph.ttl",
            "property_changes": []
          },
          "action_ts": {
            "save": "2024-01-01T02:00:00Z"
          }
        }
      ]
    }
  ]
}